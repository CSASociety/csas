<% title @character_template.name %>

<section id="main">
  <div id="main_image">
    <%-if @character_template.image.present? %>
      <%= image_tag @character_template.image.file.url(:medium) %>
    <%-end%>
  </div>
  <div id="main_info">
    <p>
      <strong>Bio:</strong>
      <%= @character_template.bio %>
    </p>
    <p>
      <strong>Status:</strong>
      <%= @character_template.status %>
    </p>

    <p>
      <%= link_to "Edit", edit_character_template_path(@character_template) %> |
      <%= link_to "Destroy", @character_template, :confirm => 'Are you sure?', :method => :delete %> |
      <%= link_to "View All", character_templates_path %>
    </p>
  </div>
</section>

<section class="attachments">
  <h2> Attachemnts </h2>
  <ul>
    <%- @character_template.attachments.each do |attachment| %>
      <li><%= link_to attachment.title, attachment.resource.file.url %></li>
    <%- end %>
  </ul>
</section>

<% if can? :update, @character_template %>
  <%= modal_dialog :id => "attach_to_character_template",
    :header => { :show_close => true, :dismiss => 'modal', :title => "Attach to #{@character_template.title} Template" },
    :body => render(partial: "attachments/attach", locals: {item: @character_template, attachment: Attachment.new}),
    :footer =>  content_tag(:button, 'Cancel', :class => 'btn btn-primary', :data => { :dismiss => 'modal' })
  %>
<%-end%>


<% content_for :page_sidebar do %>
  <% if can? :update, @character_template %>
    <%= content_tag :a, "Attach File", :href => "#attach_to_character_template", :class => 'btn', :data => {:toggle => 'modal'} %>
  <%- end %>
<% end%>

